// Copyright 2025 Audiotool Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

syntax = "proto3";

package audiotool.projecttemplate.v1;

import "google/api/field_behavior.proto";
import "google/api/resource.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/timestamp.proto";

// The usages for Project Template
enum ProjectTemplateUsage {
  // Unspecified Project Template usage
  PROJECT_TEMPLATE_USAGE_UNSPECIFIED = 0;

  // The Project Template can be viewed/used by anyone.
  PROJECT_TEMPLATE_USAGE_PUBLIC = 1;

  // The Project Template is hidden from lists but can still be used when fetching with the name.
  PROJECT_TEMPLATE_USAGE_UNLISTED = 2;

  // The Project Template is private and only visible to the creator.
  PROJECT_TEMPLATE_USAGE_PRIVATE = 3;
}

// Project Template is a resource representing a single project template.
message ProjectTemplate {
  option (google.api.resource) = {
    type: "projecttemplate.api.audiotool.com/ProjectTemplate"
    pattern: "project-template/{template}"
    singular: "project-template"
    plural: "project-templates"
  };

  // The name of the Project Template.
  string name = 1 [(google.api.field_behavior) = IDENTIFIER];

  // The creator of the project template.
  string creator_name = 2 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The original project that the template is derived from.
  //
  // Historical data of the project will not be copied, only the current state of the project.
  string copy_of_project_name = 3 [(google.api.field_behavior) = REQUIRED];

  // When the project is copied this will be the commit index at which the template was published at.
  //
  // At create time the caller will enforce a copy of a project at an exact point in time by setting
  // this value. If the value is not set, the latest commit of the project will be used and set.
  uint32 copy_of_project_commit_index = 4 [(google.api.field_behavior) = OPTIONAL];

  // The Project Template name.
  //
  // If none is provided one will be generated automatically.
  string display_name = 5 [(google.api.field_behavior) = OPTIONAL];

  // The Description of the Project Template.
  string description = 6 [(google.api.field_behavior) = OPTIONAL];

  // The usage of the Project Template
  ProjectTemplateUsage usage = 7 [(google.api.field_behavior) = REQUIRED];

  // The tags of the Project Template.
  repeated string tags = 8 [(google.api.field_behavior) = OPTIONAL];

  // Beats per minute of the project template which will be the track bpm.
  double bpm = 9 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Whether the authed user liked the project template.
  //
  // This is only exposed if the user is authenticated. The user can like a Project Template via
  // Favorites API.
  bool favorited_by_user = 10 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The number of favorites of the Project Template.
  int32 num_favorites = 11 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The number of usages of the Project Template.
  int32 num_usages = 12 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Output only. Timestamp when this Project Template was created.
  google.protobuf.Timestamp create_time = 13 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Output only. Timestamp when this Project Template was last updated.
  google.protobuf.Timestamp update_time = 14 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The snapshot of the DAW configuration of the project template.
  //
  // `?width=256&height=256&fit=cover&format=webp` can be appended to the URL for resizing
  // (current restriction - this is only able for for CDNs > 2)
  string snapshot_url = 15 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The duration of the Project Template.
  google.protobuf.Duration play_duration = 16 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The genre name of the project, copied over from the original project.
  string genre_name = 17 [(google.api.field_behavior) = OPTIONAL];

  // The URL where the project data is stored (proto message)
  string project_data_url = 18 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The URL where the project data is stored (proto message)
  string visual_state_url = 19 [(google.api.field_behavior) = OUTPUT_ONLY];
}
