/* Help Popover Component */

.help-popover {
  /* Layout */
  position: fixed;
  display: none;
  flex-direction: column;

  /* Box model */
  min-width: 280px; /* One-off dimension - specific to help popover */
  max-width: 500px; /* One-off dimension - specific to help popover */
  max-height: 65vh; /* Limit height to 80% of viewport */
  padding: var(--pd-lg);
  border: var(--frame-border);
  border-radius: var(--frame-border-radius);
  gap: var(--pd-lg);

  /* Visual */
  background: var(--frame-bg);
  box-shadow: var(--frame-shadow);
  font-size: var(--text-md);
  line-height: 1.6;

  /* Scrolling */
  overflow-y: auto;
  overflow-x: hidden;

  /* Hide scrollbar */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */

  &::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  /* Other */
  z-index: var(--message-z-index);
  pointer-events: auto;

  &.is-visible {
    display: flex;
  }

  .header {
    /* Layout */
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--pd-sm);

    /* Sticky positioning */
    position: sticky;
    top: calc(var(--pd-lg) * -1);
    z-index: 1;
    margin-top: calc(var(--pd-lg) * -1);
    padding-top: var(--pd-lg);

    /* Visual */
    background: var(--frame-bg);
    margin-bottom: calc(var(--pd-lg) * -1);
    padding-bottom: var(--pd-lg);
    box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.05);

    .title-badge {
      /* Box model */
      padding: var(--pd-sm) var(--pd-md);
      border-radius: var(--radius-md);

      /* Typography */
      font-size: var(--text-xl);
      font-weight: 700;
      line-height: 1;
      transform: translateX(calc(var(--pd-sm) * -1));
    }

    .close {
      /* Layout */
      display: flex;
      align-items: center;
      justify-content: center;

      /* Box model */
      width: var(--size-md);
      height: var(--size-md);
      padding: 0;
      border: none;
      border-radius: var(--radius-sm);

      /* Visual */
      background: transparent;
      color: var(--secondary-print);

      /* Other */
      cursor: pointer;
      transition: background 0.15s, color 0.15s;

      &:hover {
        /* Visual */
        background: var(--secondary-bg-hover);
        color: var(--secondary-print-hover);
      }

      svg {
        /* Box model */
        width: 1em;
        height: 1em;

        /* Visual */
        color: currentColor;
        fill: currentColor;
        stroke: currentColor;
      }
    }
  }

  .category {
    /* Layout */
    display: flex;
    align-items: center;
    gap: var(--pd-xs);

    /* Typography */
    color: var(--print-highlight);

    /* Hide empty category elements to prevent flex gap spacing */
    &:empty {
      display: none;
    }
  }

  .related {
    /* Layout */
    display: flex;
    flex-direction: column;
    gap: var(--pd-md);

    .related-label {
      /* Typography */
      font-weight: 700;
      color: var(--print-subtle);
    }

    .related-items {
      /* Layout */
      display: flex;
      flex-wrap: wrap;
      gap: var(--pd-xs);

      .related-item {
        /* Layout */
        display: flex;
        align-items: center;
        gap: var(--pd-sm);

        /* Box model */
        padding: var(--pd-xs) var(--pd-sm);
        border-radius: var(--radius-sm);

        /* Visual */
        background: var(--ghost-bg);
        color: var(--ghost-print);

        /* Other */
        cursor: pointer;
        transition: background 0.15s, color 0.15s;

        &:hover {
          /* Visual */
          background: var(--secondary-bg-hover);
          color: var(--secondary-print-hover);
        }

        svg {
          /* Box model */
          width: 1em;
          height: 1em;
          flex-shrink: 0;

          /* Visual */
          color: currentColor;
          fill: currentColor;
          stroke: currentColor;
        }

        .related-item-label {
          /* Typography */
          font-size: var(--text-sm);
          color: currentColor;
          white-space: nowrap;
        }
      }
    }
  }

  .description {
    /* Typography */
    font-size: var(--text-lg);
    line-height: 1.6;
  }

  .ports {
    /* Layout */
    display: flex;
    flex-direction: column;
    gap: var(--pd-sm);

    .ports-label {
      /* Typography */
      font-weight: 700;
      color: var(--print-subtle);
    }

    .ports-list {
      /* Layout */
      display: flex;
      flex-direction: column;
      gap: var(--pd-md);
    }

    .port-item {
      /* Layout */
      display: flex;
      flex-direction: column;
      gap: var(--pd-xs);

      .port-name-row {
        /* Layout */
        display: flex;
        align-items: center;
        gap: var(--pd-sm);
      }

      .port-name {
        /* Typography */
        font-weight: 600;
        font-family: var(--font-mono);
        font-size: var(--text-sm);
        color: var(--print-highlight);
      }

      .port-type {
        /* Box model */
        padding: var(--pd-2xs) var(--pd-xs);
        border-radius: var(--radius-sm);

        /* Visual */
        background: var(--ghost-bg);
        color: var(--ghost-print);

        /* Typography */
        font-size: var(--text-xs);
        font-family: var(--font-mono);
      }

      .port-description {
        /* Typography */
        font-size: var(--text-sm);
        line-height: 1.5;
        color: var(--print-subtle);
      }

      .port-suggestions {
        /* Layout */
        display: flex;
        flex-direction: column;
        gap: var(--pd-xs);

        .port-suggestions-label {
          /* Typography */
          font-size: var(--text-xs);
          font-weight: 600;
          color: var(--print-subtle);
        }

        .port-suggestions-items {
          /* Layout */
          display: flex;
          flex-wrap: wrap;
          gap: var(--pd-xs);

          .port-suggestion-type {
            /* Box model */
            padding: var(--pd-2xs) var(--pd-xs);
            border-radius: var(--radius-sm);

            /* Visual */
            background: var(--ghost-bg);
            color: var(--ghost-print);

            /* Typography */
            font-size: var(--text-xs);
            font-family: var(--font-mono);
          }

          .related-item {
            /* Layout */
            display: flex;
            align-items: center;
            gap: var(--pd-sm);

            /* Box model */
            padding: var(--pd-xs) var(--pd-sm);
            border-radius: var(--radius-sm);

            /* Visual */
            background: var(--ghost-bg);
            color: var(--ghost-print);

            /* Other */
            cursor: default;
            transition: background 0.15s, color 0.15s;

            svg {
              /* Box model */
              width: 1em;
              height: 1em;
              flex-shrink: 0;

              /* Visual */
              color: currentColor;
              fill: currentColor;
              stroke: currentColor;
            }

            .related-item-label {
              /* Typography */
              font-size: var(--text-sm);
              color: currentColor;
              white-space: nowrap;
            }
          }
        }
      }
    }
  }

  .examples {
    /* Layout */
    display: flex;
    flex-direction: column;
    gap: var(--pd-sm);

    .examples-label {
      /* Typography */
      font-weight: 700;
      color: var(--print-subtle);
    }

    .examples-list {
      /* Box model */
      margin: 0;
      padding-left: var(--pd-lg);
      list-style: disc;

      li {
        /* Box model */
        margin-bottom: var(--pd-xs);

        &:last-child {
          margin-bottom: 0;
        }
      }
    }
  }
}
